<button class="chat-fab" *ngIf="!isChatOpen" (click)="toggleChat()">

    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="28px" height="28px">
        <path d="M0 0h24v24H0V0z" fill="none" />
        <path
            d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12zM7 9h10v2H7zM5 6h14v2H5z" />
    </svg>

    <span class="fab-tooltip">Abrir ChatBot</span>

</button>


<div class="modal-overlay" *ngIf="isChatOpen" (click)="toggleChat()">

    <div class="chat-popup" (click)="$event.stopPropagation()">

        <div class="chat-header">

            <div class="chat-title">
                <svg class="chat-icon" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24"
                    width="24px">
                    <path d="M0 0h24v24H0V0z" fill="none" />
                    <path
                        d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6zm2 5c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zM9.5 9.5c.83 0 1.5-.67 1.5-1.5S10.33 6.5 9.5 6.5 8 7.17 8 8s.67 1.5 1.5 1.5zm5 0c.83 0 1.5-.67 1.5-1.5S15.33 6.5 14.5 6.5 13 7.17 13 8s.67 1.5 1.5 1.5z" />
                </svg>
                <span>Chat de Ayuda</span>
            </div>

            <button class="toggle-btn" (click)="toggleChat()" title="Cerrar">X</button>
        </div>
        <div class="chat-messages" #chatMessagesContainer>
            <div *ngFor="let msg of messages" class="message"
                [ngClass]="{ 'user': msg.from === 'user', 'bot': msg.from === 'bot' }">
                <span [innerText]="msg.text"></span>
            </div>
        </div>

        <div class.="chat-menu-area" *ngIf="currentMenu.length > 0">
            <button *ngFor="let option of currentMenu" class="menu-option-btn" (click)="sendMenuOption(option)">
                {{ option.text }}
            </button>
        </div>

    </div>
</div>